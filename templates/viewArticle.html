<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
      <!--   <style>
           #DeleteButton{
            display: none;
           }
        </style> -->
    </head>
    <body>
        <h2 align="center">IITI Code Management</h2>

        <div class="header" align="right">
          <a href="{{url_for('addArticle')}}">Add Article</a>
          <a href="{{url_for('myprofile')}}">My Profile</a>
          <a href="{{ url_for('logout') }}"> Logout</a>
          <hr size=2>
        </div>
        <!-- <textarea name="name" rows="8" cols="80" readonly> -->
            <pre><code data-language = "c">
                {% if data %}
                    {{data}}
                {% else %}
                    Error Reading Data from File!
                {%endif%}
            </code></pre>
         <!-- </textarea> -->
        <br>
        {% if myprofile_guest %}
        <form class="" action="{{url_for('viewArticle')}}" method="post">
            <button type="button" id="CommentButton" onclick="showBox()">Add Comment</button>
            <input type="text" name="inputDescription" id="AddDescription" hidden><button type="submit" name="btn" value="Add Comment" id="AddComment" hidden>Submit</button>
            <script type="text/javascript">
            function showBox(){
                var x = document.getElementById("AddComment");
                  if (x.style.display === "none") {
                    x.style.display = "block";
                  } else {
                    x.style.display = "none";
                  }
                  x = document.getElementById("AddDescription");
                  if (x.style.display === "none") {
                    x.style.display = "block";
                  } else {
                    x.style.display = "none";
                  }

            }
            </script>
        </form>
        {% endif %}

        {% if comments %}
            {% if comments|length>0 %}
                {%- for item in comments recursive %}
                    <li>{{ item.text }}</li>
                    {% if myprofile_guest %}
                        <form class="" action="{{url_for('viewArticle')}}" method="post">
                            <button type="button" id="ReplyButton" onclick="showBox()">Add Reply</button>
                            <input type="text" name="inputCommentFor" value="{{item.id}}" hidden>
                            <input type="text" name="inputDescriptionReply" id="AddDescription" hidden><button type="submit" name="btn" value="Add Reply" id="AddReply" hidden>Submit</button>
                            <script type="text/javascript">
                            function showBox(){
                                var x = document.getElementById("AddReply");
                                  if (x.style.display === "none") {
                                    x.style.display = "block";
                                  } else {
                                    x.style.display = "none";
                                  }
                                  x = document.getElementById("AddDescription");
                                  if (x.style.display === "none") {
                                    x.style.display = "block";
                                  } else {
                                    x.style.display = "none";
                                  }

                            }
                            </script>
                        </form>
                    {% endif %}
                    {%- if item.children -%}
                        <ul class="children">{{ loop(item.children) }}</ul>
                    {%- endif %}
                {%- endfor %}
            {% endif %}
        {% endif %}

        {% if check %}
            <form class="" action="{{url_for('viewArticle')}}" method="post">
                <input type="text" name="DeleteArticle" id="RemoveArticle" value="test" hidden>
                <button id="DeleteButton">Delete Article</button>
            </form>
        {% endif %}
        <form class="" action="{{url_for('viewArticle')}}" method="post">
             <input type="text" name="inputRating" id="rating" value="test" hidden>
             <button type="" id="like"><img src ="{{url_for('static', filename='likebutton.png')}}"width="10" height="10" ></button>{{rating}}
             <button type="" id="dislike"><img src ="{{url_for('static', filename='dislikebutton')}}" width="10" height="10"></button>
            <!-- <input type="image" src="{{url_for('static', filename='likebutton.png')}}" name="btn" value="like" id="like">{{rating}}<input type="image" src="{{url_for('static', filename='dislikebutton')}}" name="btn" value="dislike" id="dislike"> -->
        </form>

         <a href="{{url_for('getHomepage')}}">Back</a>

        <script type="text/javascript" src="{{url_for('static', filename = 'script/jquery-3.4.1.js')}}">
        </script>
        <link type="text/css" href="{{ url_for('static',filename='styles/monokai.css') }}" rel="stylesheet"/>
        <link type="text/css" href="{{ url_for('static',filename='styles/viewArticle.css') }}" rel="stylesheet"/>
        <script type="text/javascript" src="{{url_for('static', filename = 'script/rainbow-custom.min.js')}}">
        </script>
        <script type="text/javascript" src="{{url_for('static', filename = 'script/viewArticle.js')}}">
        </script>
    </body>
</html>
